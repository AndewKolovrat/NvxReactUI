"use strict";(self.webpackChunknvxreactui=self.webpackChunknvxreactui||[]).push([[343],{"./src/Components/NvxDataGrid/NvxDataGrid.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NvxDataGrid_stories});var react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/react-window/dist/index.esm.js"),scrollbarSize=__webpack_require__("./node_modules/dom-helpers/esm/scrollbarSize.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),NvxDataGrid=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/Components/NvxDataGrid/NvxDataGrid.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(NvxDataGrid.Z,options);NvxDataGrid.Z&&NvxDataGrid.Z.locals&&NvxDataGrid.Z.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getText=value=>String(void 0===value?"":value),renderColumnHeader=params=>{const{index,style,data:{columns,render}}=params;return render?render({columnIndex:index,style,className:"rdc_table_cell"}):(0,jsx_runtime.jsx)("div",{className:"rdc_table_cell",style,children:columns[index].label||columns[index].id||""})},renderRowHeader=params=>{const{index,style,data:{render}}=params;return render?render({rowIndex:index,style,className:"rdc_table_cell"}):(0,jsx_runtime.jsx)("div",{className:"rdc_table_cell",style,children:index+1})},renderCell=params=>{const{columnIndex,rowIndex,style,data:{recordset,footerIndex,width,columns,Footer,render}}=params;if(footerIndex===rowIndex)return 0===columnIndex?(0,jsx_runtime.jsx)("div",{className:"rdc_table_cell",style:{...style,width},children:(0,jsx_runtime.jsx)(Footer,{})}):null;if(render)return render({rowIndex,columnIndex,style,className:"rdc_table_cell"});{const value=(recordset[rowIndex]||{})[columns[columnIndex].id],newStyle={...style,overflow:"hidden",textOverflow:"ellipsis"};return(0,jsx_runtime.jsx)("div",{className:"rdc_table_cell",style:newStyle,children:getText(value)})}},calcColumnSize=params=>{const{value,column,lineHeight,columnHorizontalPadding,columnVerticalPadding,textContext}=params;let columnHeight=column.height,columnWidth=column.width;if(columnHeight&&columnWidth)return[columnHeight,columnWidth];if(!textContext)return[0,0];const text=getText(value),label=columnWidth?"":column.label||column.id,valueWidth=textContext.measureText(text.length>label.length?text:label).width;if("string"!=typeof value)return[lineHeight+columnVerticalPadding,column.width||(columnWidth||valueWidth)+columnHorizontalPadding];if(!columnWidth){columnWidth=value.split(" ").length>5?Math.round(valueWidth/2):valueWidth}if(columnWidth>=valueWidth+columnVerticalPadding)return[lineHeight+columnVerticalPadding,(column.width||valueWidth)+columnHorizontalPadding];return columnHeight=Math.ceil(valueWidth/columnWidth)*lineHeight,column.maxHeight&&columnHeight>column.maxHeight?[column.maxHeight,(column.width||columnWidth)+columnHorizontalPadding]:[columnHeight+columnVerticalPadding,(column.width||columnWidth)+columnHorizontalPadding]},NvxDataGrid_NvxDataGrid_NvxDataGrid=props=>{let{displayIndex=!1,minColumnWidth=20,height,width,recordset,footerRenderer:Footer,columns,columnHeaderHeight,columnHeaderRenderer,cellRenderer,rowHeaderRenderer,rowHeaderWidth=20,columnHeaderProps,rowHeaderProps,bodyProps,maxHeight=5e3,gridRef,scrollToTopOnNewRecordset,lineHeight,style,columnHorizontalPadding=0,columnVerticalPadding=0,verticalPadding=0,...rest}=props;const[font,setFont]=(0,react.useState)(0),[textContext,setTextContex]=(0,react.useState)(null);if((0,react.useLayoutEffect)((()=>{const context=document.createElement("canvas").getContext("2d");context&&(context.font=font.toString(),setTextContex(context))}),[font,columns]),!lineHeight&&textContext){const fontSize=parseFloat(textContext.font);lineHeight=fontSize+fontSize/2}columnHeaderHeight||(columnHeaderHeight=lineHeight||0);const[rowHeights,columnWidths,totalHeight]=(0,react.useMemo)((()=>{const rowHeights=[],columnWidths=[];let totalHeight=0;const calcColumnsSize=record=>{let recordRowHeight=0,i=0;for(const column of columns){const value=record[column.id],[columnHeight,columnWidth]=calcColumnSize({value,column,lineHeight,columnHorizontalPadding,columnVerticalPadding,textContext});columnHeight>recordRowHeight&&(recordRowHeight=columnHeight),(!columnWidths[i]||columnWidth>columnWidths[i])&&(columnWidths[i]=columnWidth),i++}rowHeights.push(recordRowHeight),totalHeight+=recordRowHeight};return recordset.length?recordset.forEach(calcColumnsSize):calcColumnsSize({}),[rowHeights,columnWidths,totalHeight]}),[recordset,columns,lineHeight,columnHorizontalPadding,columnVerticalPadding,textContext]),getRowHeight=i=>rowHeights[i]||0,mayBeRef=(0,react.useRef)(null);gridRef||(gridRef=mayBeRef);const innerRef=(0,react.useRef)(null),headerRef=(0,react.useRef)(null),rowHeaderRef=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{scrollToTopOnNewRecordset&&gridRef.current.scrollTo({scrollLeft:0,scrollTop:0}),gridRef.current.resetAfterRowIndex(0),rowHeaderRef.current&&rowHeaderRef.current.resetAfterIndex(0)}),[recordset,rowHeights,columnWidths,scrollToTopOnNewRecordset,gridRef]),(0,react.useLayoutEffect)((()=>{innerRef.current&&setFont(Number(window.getComputedStyle(innerRef.current,null).getPropertyValue("font")))}),[style,props.className]);const footerIndex=Footer?recordset.length:-1,rowCount=recordset.length+(Footer?1:0),gridWidth=width-rowHeaderWidth,columnsWidth=columnWidths.reduce(((w,width)=>w+width),0);let heightIsNotEnough,widthIsNotEnough=gridWidth<columnsWidth,requiredHeight=columnHeaderHeight+totalHeight;widthIsNotEnough&&(requiredHeight+=(0,scrollbarSize.Z)()),void 0===height?height=requiredHeight+verticalPadding:heightIsNotEnough=requiredHeight>height,height>maxHeight&&(height=maxHeight,heightIsNotEnough=!0,gridWidth<columnsWidth+(0,scrollbarSize.Z)()&&(widthIsNotEnough=!0)),(0,react.useLayoutEffect)((()=>{headerRef.current&&(headerRef.current.resetAfterIndex(0),gridRef.current.resetAfterColumnIndex(0))}),[columns,rowHeights,columnWidths,gridRef]);const getColumnWidth=i=>columnWidths[i]||0,headerMarginRight=heightIsNotEnough?(0,scrollbarSize.Z)():0,columnHeaderMarginBottom=widthIsNotEnough?(0,scrollbarSize.Z)():0;return(0,jsx_runtime.jsxs)("div",{...rest,style:{...style||{},width,position:"relative",height},children:[(0,jsx_runtime.jsx)("div",{style:{position:"absolute",top:0,left:rowHeaderWidth},children:(0,jsx_runtime.jsx)(index_esm.S_,{ref:headerRef,layout:"horizontal",height:columnHeaderHeight,width:gridWidth-headerMarginRight,itemCount:columns.length,itemSize:getColumnWidth,...columnHeaderProps,itemData:{columns,render:columnHeaderRenderer},style:{overflow:"hidden",...columnHeaderProps&&columnHeaderProps.style||{}},children:renderColumnHeader})}),displayIndex&&(0,jsx_runtime.jsx)("div",{style:{position:"absolute",left:0,top:columnHeaderHeight},children:(0,jsx_runtime.jsx)(index_esm.S_,{ref:rowHeaderRef,height:height-columnHeaderHeight-columnHeaderMarginBottom,width:rowHeaderWidth,itemCount:recordset.length,itemSize:getRowHeight,...rowHeaderProps,itemData:{render:rowHeaderRenderer},style:{overflow:"hidden",...rowHeaderProps&&rowHeaderProps.style||{}},children:renderRowHeader})}),(0,jsx_runtime.jsx)("div",{style:{position:"absolute",left:rowHeaderWidth,top:columnHeaderHeight},children:(0,jsx_runtime.jsx)(index_esm.cd,{ref:gridRef,innerRef,height:height-columnHeaderHeight,width:gridWidth,rowCount,rowHeight:getRowHeight,columnCount:columns.length,columnWidth:getColumnWidth,onScroll:params=>{const{scrollLeft,scrollTop}=params;headerRef.current&&headerRef.current.scrollTo(scrollLeft),rowHeaderRef.current&&rowHeaderRef.current.scrollTo(scrollTop)},itemData:{recordset,footerIndex,width:width-headerMarginRight,columns,Footer,render:cellRenderer},...bodyProps,children:renderCell})})]})};NvxDataGrid_NvxDataGrid_NvxDataGrid.displayName="NvxDataGrid";try{NvxDataGrid_NvxDataGrid_NvxDataGrid.displayName="NvxDataGrid",NvxDataGrid_NvxDataGrid_NvxDataGrid.__docgenInfo={description:"",displayName:"NvxDataGrid",props:{height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},rowHeaderWidth:{defaultValue:null,description:"",name:"rowHeaderWidth",required:!1,type:{name:"number"}},lineHeight:{defaultValue:null,description:"",name:"lineHeight",required:!1,type:{name:"number"}},columnHorizontalPadding:{defaultValue:null,description:"",name:"columnHorizontalPadding",required:!1,type:{name:"number"}},columnVerticalPadding:{defaultValue:null,description:"",name:"columnVerticalPadding",required:!1,type:{name:"number"}},verticalPadding:{defaultValue:null,description:"",name:"verticalPadding",required:!1,type:{name:"number"}},columnHeaderHeight:{defaultValue:null,description:"",name:"columnHeaderHeight",required:!1,type:{name:"number"}},columnHeaderProps:{defaultValue:null,description:"",name:"columnHeaderProps",required:!1,type:{name:"any"}},rowHeaderProps:{defaultValue:null,description:"",name:"rowHeaderProps",required:!1,type:{name:"any"}},bodyProps:{defaultValue:null,description:"",name:"bodyProps",required:!1,type:{name:"any"}},gridRef:{defaultValue:null,description:"",name:"gridRef",required:!1,type:{name:"any"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},minColumnWidth:{defaultValue:null,description:"",name:"minColumnWidth",required:!1,type:{name:"number"}},displayIndex:{defaultValue:null,description:"",name:"displayIndex",required:!1,type:{name:"boolean"}},scrollToTopOnNewRecordset:{defaultValue:null,description:"",name:"scrollToTopOnNewRecordset",required:!1,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"INvxDataGridColumn[]"}},recordset:{defaultValue:null,description:"",name:"recordset",required:!0,type:{name:"any[]"}},footerRenderer:{defaultValue:null,description:"",name:"footerRenderer",required:!1,type:{name:"FC<{}>"}},columnHeaderRenderer:{defaultValue:null,description:"",name:"columnHeaderRenderer",required:!1,type:{name:"FC<{}>"}},cellRenderer:{defaultValue:null,description:"",name:"cellRenderer",required:!1,type:{name:"FC<{}>"}},rowHeaderRenderer:{defaultValue:null,description:"",name:"rowHeaderRenderer",required:!1,type:{name:"FC<{}>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Components/NvxDataGrid/NvxDataGrid.tsx#NvxDataGrid"]={docgenInfo:NvxDataGrid_NvxDataGrid_NvxDataGrid.__docgenInfo,name:"NvxDataGrid",path:"src/Components/NvxDataGrid/NvxDataGrid.tsx#NvxDataGrid"})}catch(__react_docgen_typescript_loader_error){}const NvxDataGrid_stories={title:"Components/NvxDataGrid",component:NvxDataGrid_NvxDataGrid_NvxDataGrid,parameters:{},tags:["autodocs"],argTypes:{}},columns=[{id:"column1",label:"Column 1"},{id:"column2",label:"Column 2"},{id:"column3",label:"Column 3"},{id:"column4",label:"Column 4"},{id:"column5",label:"Column 5"},{id:"column6",label:"Column 6"}],Default={args:{columnHorizontalPadding:20,columnVerticalPadding:20,rowHeaderWidth:0,height:250,width:350,columns,recordset:function(columns){let count=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const dataList=[];for(let i=0;i<count;i++){const item={};columns.forEach(((column,index)=>{item[column.id]=`cell_${i}_${index}`})),dataList.push(item)}return dataList}(columns,500)}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    columnHorizontalPadding: 20,\n    columnVerticalPadding: 20,\n    // displayIndex\n    rowHeaderWidth: 0,\n    height: 250,\n    width: 350,\n    columns: columns,\n    recordset: calcData(columns, 500)\n  }\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/Components/NvxDataGrid/NvxDataGrid.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".rdc_table_cell{display:flex;align-items:center;justify-content:center}\n","",{version:3,sources:["webpack://./src/Components/NvxDataGrid/NvxDataGrid.scss"],names:[],mappings:"AACA,gBACI,YAAa,CACb,kBAAmB,CACnB,sBAAuB",sourcesContent:["\r\n.rdc_table_cell {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);